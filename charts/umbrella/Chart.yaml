# #############################################################################
# Copyright (c) 2023 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
# #############################################################################
---
apiVersion: v2
name: umbrella
description: |
  A Helm chart to spin up Catena-X OSS components to simulate a complete dataspace network.

  With this Helm chart you are able to create a sandbox environment or run end-to-end.

sources:
  - https://github.com/eclipse-tractusx/e2e-testing

type: application
version: 0.2.1

dependencies:
  - alias: certsconsumer
    name: certs
    version: 0.1.0
    condition: global.edc.enabled
  - alias: certsprovider
    name: certs
    version: 0.1.0
    condition: global.edc.enabled

  - alias: dapsserver
    name: daps-server
    version: 1.7.5
    # adding repo as directory to modify the chart
    # repository: https://eclipse-tractusx.github.io/charts/dev

  # edc consumer
  - alias: edcconsumer
    name: tractusx-connector
    version: 0.3.0
    # repository: https://catenax-ng.github.io/product-edc
    condition: global.edc.enabled
  # edc provider
  - alias: edcprovider
    name: tractusx-connector
    version: 0.3.0
    # repository: https://catenax-ng.github.io/product-edc
    condition: global.edc.enabled

  - name: vault
    version: 0.23.0
    repository: https://helm.releases.hashicorp.com
    condition: global.edc.enabled


  #  # IRS ############################

  # Semantic Hub Service
  - name: semantic-hub
    alias: semantic-hub
    version: 0.0.1
    repository: "file://subcharts/semantic-hub"
    condition: install.semanticHub

  # Digital Twin Registry
  - name: registry
    alias: digital-twin-registry
    version: 0.2.14
    repository: https://eclipse-tractusx.github.io/charts/dev
    condition: install.digitalTwin

  # KeyCloak Service
  - name: keycloak
    alias: keycloak
    version: 0.0.1
    repository: "file://subcharts/keycloak"
    condition: install.keycloak

  # IRS Provider Backend
  - name: irs-provider-backend
    alias: irs-provider-backend
    version: 0.0.1
    repository: "file://subcharts/irs-provider-backend"
    condition: install.irs.providerBackend

  # IRS
  - name: irs-helm
    alias: irs
    repository: https://catenax-ng.github.io/tx-item-relationship-service
    version: 5.0.9
    condition: irs.enabled

  # IRS Frontend Service
  - name: irs-frontend-service
    alias: irs-frontend
    version: 0.0.5
    repository: "file://subcharts/irs-frontend-service"
    condition: install.irs.frontend

  # Discovery
  - name: discovery
    version: 0.0.1
    repository: "file://subcharts/discovery"
    condition: install.discovery