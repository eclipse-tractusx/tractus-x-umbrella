# #############################################################################
# Copyright (c) 2023,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
# #############################################################################
---
portal:
  enabled: false
  replicaCount: 1
  postgresql:
    nameOverride: "portal-backend-postgresql"
    architecture: standalone
    auth:
      password: "dbpasswordportal"
      portalPassword: "dbpasswordportal"
      replicationPassword: "dbpasswordportal"
      provisioningPassword: "dbpasswordportal"
    primary:
      persistence:
        enabled: false
  portalAddress: "http://portal.tx.test"
  portalBackendAddress: "http://portal-backend.tx.test"
  centralidp:
    address: "http://centralidp.tx.test"
  sharedidpAddress: "http://sharedidp.tx.test"
  semanticsAddress: "http://semantics.tx.test"
  bpdm:
    poolAddress: "http://business-partners.tx.test"
    poolApiPath: "/pool/v6"
    portalGateAddress: "http://business-partners.tx.test"
    portalGateApiPath: "/gate/v6"
  custodianAddress: "http://managed-identity-wallets.tx.test"
  sdfactoryAddress: "http://sdfactory.tx.test"
  clearinghouseAddress: "http://validation.tx.test"
  clearinghouseTokenAddress: "http://keycloak.tx.test/realms/example/protocol/openid-connect/token"
  issuerComponentAddress: "http://ssi-credential-issuer.tx.test"
  frontend:
    ingress:
      enabled: true
      annotations:
        # uncomment the following line for tls
        # cert-manager.io/cluster-issuer: "my-ca-issuer"
        nginx.ingress.kubernetes.io/rewrite-target: "/$1"
        nginx.ingress.kubernetes.io/use-regex: "true"
        nginx.ingress.kubernetes.io/enable-cors: "true"
        nginx.ingress.kubernetes.io/cors-allow-origin: "http://*.tx.test"
      # uncomment the following lines for tls
      # tls:
      #   # -- Provide tls secret.
      #   - secretName: "portal.tx.test-tls"
      #     # -- Provide host for tls secret.
      #     hosts:
      #       - "portal.tx.test"
      hosts:
        - host: "portal.tx.test"
          paths:
            - path: "/(.*)"
              pathType: "ImplementationSpecific"
              backend:
                service: "portal"
                port: 8080
            - path: "/registration/(.*)"
              pathType: "ImplementationSpecific"
              backend:
                service: "registration"
                port: 8080
            - path: "/((assets|documentation)/.*)"
              pathType: "ImplementationSpecific"
              backend:
                service: "assets"
                port: 8080
  backend:
    dotnetEnvironment: "Development"
    useDimWallet: true
    keycloak:
      central:
        clientId: "sa-cl1-reg-2"
        clientSecret: "aEoUADDw2aNPa0WAaKGAyKfC80n8sKxJ"
        jwtBearerOptions:
          requireHttpsMetadata: "false"
      shared:
        clientId: "sa-cl1-reg-1"
        clientSecret: "YPA1t6BMQtPtaG3fpH8Sa8Ac6KYbPUM7"
    registration:
      logging:
        default: "Debug"
        bpdmLibrary: "Debug"
        registrationService: "Debug"
      swaggerEnabled: true
    administration:
      logging:
        default: "Debug"
        businessLogic: "Debug"
        sdfactoryLibrary: "Debug"
        bpdmLibrary: "Debug"
        custodianLibrary: "Debug"
      serviceAccount:
        encryptionConfigs:
          index0:
            encryptionKey: "deb8261ec7b89c344f1c5ef5a11606e305f14e0d231b1357d90ad0180c5081d3"
      issuerdid: "did:web:managed-identity-wallets.tx.test:BPNL00000003CRHK"
      swaggerEnabled: true
    appmarketplace:
      logging:
        default: "Debug"
        offersLibrary: "Debug"
      swaggerEnabled: true
    services:
      logging:
        default: "Debug"
        offersLibrary: "Debug"
      swaggerEnabled: true
    notification:
      logging:
        default: "Debug"
      swaggerEnabled: true
    processesworker:
      clearinghouseConnectDisabled: true
      logging:
        default: "Debug"
        processesLibrary: "Debug"
        bpdmLibrary: "Debug"
        clearinghouseLibrary: "Debug"
        custodianLibrary: "Debug"
        sdfactoryLibrary: "Debug"
        offerProvider: "Debug"
      bpdm:
        clientId: &bpdmAdminClientId "sa-cl7-cx-5"
        clientSecret: &bpdmAdminClientSecret "bWSck103qNJ0jZ1LVtG9mUAlcL7R5RLg"
      # -- no configuration for clearinghouse because it's an external component
      # clientId and clientSecret aren't in the centralidp Keycloak
      # clearinghouse:
      #   clientId: "clearinghouse-client-id"
      #   clientSecret: ""
      custodian:
        clientId: "sa-cl5-custodian-2"
        clientSecret: "UIqawwoohsvZ6AZOd1llLhnsUTKMWe4D"
      sdfactory:
        issuerBpn: "BPNL00000003CRHK"
        clientId: "sa-cl8-cx-1"
        clientSecret: "clbQOPHcVKY9tUUd068vyf8CrsPZ8BgZ"
      offerprovider:
        clientId: "sa-cl2-03"
        clientSecret: "wyNYzSnyu4iGvj17XgLSl0aQxAPjTjmI"
      dim:
        clientId: "dim-client-id"
        clientSecret: ""
        universalResolverAddress: "https://dev.uniresolver.io/"
        encryptionConfigs:
          index0:
            encryptionKey:
              "6cbaf47ee30c778088e6faa44e2f0eed98beda86db06c7d2e37e32ab78e14b33"
      issuerComponent:
        clientId: "sa-cl2-04"
        clientSecret: "c0gFPfWWUpeOr7MP6DIqdRPhUfaX4GRC"
        encryptionConfigs:
          index0:
            encryptionKey:
              "39ffab76f99ece1e4ac72f973d5c703737324a75c6445e84fa317a7833476a15"
      bpnDidResolver:
        # -- ApiKey for management endpoint of the bpnDidResolver. Secret-key 'bpndidresolver-api-key'.
        apiKey: ""
      onboardingServiceProvider:
        encryptionConfigs:
          index0:
            cipherMode: "CBC"
            paddingMode: "PKCS7"
            encryptionKey:
              "f7bc3d99f1ace73e7a75b794affbbc26206ab29909821a102aaccb2e95e45f7c"
          index1:
            encryptionKey:
              "8027152fe7a869c88acc86981760acd70ff1d660c2bd129eece94edef933caf7"
      invitation:
        encryptionConfigs:
          index0:
            encryptionKey:
              "d84fea29d6eac0fa51e36682b164e7d61693cd4202ed04306d2d9c5d46655e2c"
      mailing:
        encryptionConfigs:
          index0:
            encryptionKey:
              "d2e27d71b018cb36029184852f1baa3e26891be94718f77de4c7cc6c882fe317"
    mailing:
      host: "smtp.tx.test"
      port: "587"
      user: "smtp-user"
      senderEmail: "smtp@tx.test"
      password: ""
    portalmigrations:
      logging:
        default: "Debug"
    provisioning:
      sharedRealm:
        smtpServer:
          host: "smtp.tx.test"
          port: "587"
          user: "smtp-user"
          password: ""
          from: "smtp@tx.test"
          replyTo: "smtp@tx.test"
    # -- docs: http://portal-backend.tx.test/api/administration/swagger/index.html
    # http://portal-backend.tx.test/api/registration/swagger/index.html
    # http://portal-backend.tx.test/api/apps/swagger/index.html
    # http://portal-backend.tx.test/api/services/swagger/index.html
    # http://portal-backend.tx.test/api/notification/swagger/index.html
    ingress:
      enabled: true
      name: "portal-backend"
      annotations:
        # uncomment the following line for tls
        # cert-manager.io/cluster-issuer: "my-ca-issuer"
        nginx.ingress.kubernetes.io/use-regex: "true"
        nginx.ingress.kubernetes.io/enable-cors: "true"
        nginx.ingress.kubernetes.io/proxy-body-size: "8m"
        nginx.ingress.kubernetes.io/cors-allow-origin: "http://localhost:3000, http://*.tx.test"
      # uncomment the following lines for tls
      # tls:
      #   # -- Provide tls secret.
      #   - secretName: "portal-backend.tx.test-tls"
      #     # -- Provide host for tls secret.
      #     hosts:
      #       - "portal-backend.tx.test"
      hosts:
        - host: "portal-backend.tx.test"
          paths:
            - path: "/api/registration"
              pathType: "Prefix"
              backend:
                service: "registration-service"
                port: 8080
            - path: "/api/administration"
              pathType: "Prefix"
              backend:
                service: "administration-service"
                port: 8080
            - path: "/api/notification"
              pathType: "Prefix"
              backend:
                service: "notification-service"
                port: 8080
            - path: "/api/provisioning"
              pathType: "Prefix"
              backend:
                service: "provisioning-service"
                port: 8080
            - path: "/api/apps"
              pathType: "Prefix"
              backend:
                service: "marketplace-app-service"
                port: 8080
            - path: "/api/services"
              pathType: "Prefix"
              backend:
                service: "services-service"
                port: 8080

centralidp:
  enabled: false
  keycloak:
    nameOverride: "centralidp"
    replicaCount: 1
    postgresql:
      nameOverride: "centralidp-postgresql"
      architecture: standalone
      primary:
        persistence:
          enabled: false
    proxy: edge
    initContainers:
      - name: realm-import
        image: docker.io/tractusx/umbrella-init-container:1.0.0-init
        imagePullPolicy: IfNotPresent
        command:
          - sh
        args:
          - -c
          - |
            echo "Copying realms..."
            cp -R /import/catenax-central/realms/* /realms
        volumeMounts:
        - name: realms
          mountPath: "/realms"
      - name: theme-import
        image: docker.io/tractusx/portal-iam:v3.0.0
        imagePullPolicy: IfNotPresent
        command:
          - sh
        args:
          - -c
          - |
            echo "Copying themes..."
            cp -R /import/themes/catenax-central/* /themes
        volumeMounts:
        - name: themes
          mountPath: "/themes"
      # uncomment the following line for tls
      # - name: init-certs
      #   image: docker.io/bitnami/keycloak:23.0.7-debian-12-r1
      #   imagePullPolicy: IfNotPresent
      #   command: ["/bin/bash"]
      #   args:
      #     - -ec
      #     - |-
      #       keytool -import -file "/certs/tls.crt" \
      #               -keystore "/opt/bitnami/keycloak/certs/keycloak.truststore.jks" \
      #               -storepass "${KEYCLOAK_SPI_TRUSTSTORE_PASSWORD}" \
      #               -noprompt
      #   env:
      #     - name: KEYCLOAK_SPI_TRUSTSTORE_PASSWORD
      #       value: "changeit"
      #   volumeMounts:
      #     - name: certificates
      #       mountPath: /certs
      #     - name: shared-certs
      #       mountPath: "/opt/bitnami/keycloak/certs"
    extraEnvVars:
      - name: KEYCLOAK_EXTRA_ARGS
        value: "-Dkeycloak.migration.action=import -Dkeycloak.migration.provider=singleFile -Dkeycloak.migration.file=/realms/CX-Central-realm.json -Dkeycloak.migration.strategy=IGNORE_EXISTING"
      # uncomment the following line for tls
      # - name: KEYCLOAK_SPI_TRUSTSTORE_FILE
      #   value: "/opt/bitnami/keycloak/certs/keycloak.truststore.jks"
      # - name: KEYCLOAK_SPI_TRUSTSTORE_PASSWORD
      #   value: "changeit"
    extraVolumes:
      - name: realms
        emptyDir: {}
      - name: themes
        emptyDir: {}
      # uncomment the following line for tls
      # - name: certificates
      #   secret:
      #     secretName: root-secret
      #     defaultMode: 420
      # - name: shared-certs
      #   emptyDir: {}
    extraVolumeMounts:
      - name: realms
        mountPath: "/realms"
      - name: themes
        mountPath: "/opt/bitnami/keycloak/themes/catenax-central"
      # uncomment the following line for tls
      # - name: certificates
      #   mountPath: /certs
      # - name: shared-certs
      #   mountPath: "/opt/bitnami/keycloak/certs"
    ingress:
      enabled: true
      ingressClassName: "nginx"
      hostname: "centralidp.tx.test"
      annotations:
        # uncomment the following line for tls
        # cert-manager.io/cluster-issuer: "my-ca-issuer"
        nginx.ingress.kubernetes.io/cors-allow-credentials: "true"
        nginx.ingress.kubernetes.io/cors-allow-methods: "PUT, GET, POST, OPTIONS"
        nginx.ingress.kubernetes.io/cors-allow-origin: "http://centralidp.tx.test"
        nginx.ingress.kubernetes.io/enable-cors: "true"
        nginx.ingress.kubernetes.io/proxy-buffer-size: "128k"
        nginx.ingress.kubernetes.io/proxy-buffering: "on"
        nginx.ingress.kubernetes.io/proxy-buffers-number: "20"
        nginx.ingress.kubernetes.io/use-regex: "true"
      tls: false
  secrets:
    postgresql:
      auth:
        existingSecret:
          postgrespassword: "dbpasswordcentralidp"
          password: "dbpasswordcentralidp"
          replicationPassword: "dbpasswordcentralidp"
    auth:
      existingSecret:
        # -- Password for the admin username 'admin'. Secret-key 'admin-password'.
        adminpassword: "adminconsolepwcentralidp"

sharedidp:
  enabled: false
  keycloak:
    nameOverride: "sharedidp"
    replicaCount: 1
    postgresql:
      nameOverride: "sharedidp-postgresql"
      architecture: standalone
      primary:
        persistence:
          enabled: false
    proxy: edge
    initContainers:
      - name: realm-import
        image: docker.io/tractusx/umbrella-init-container:1.0.0-init
        imagePullPolicy: IfNotPresent
        command:
          - sh
        args:
          - -c
          - |
            echo "Copying realms..."
            cp -R /import/catenax-shared/realms/* /realms
        volumeMounts:
        - name: realms
          mountPath: "/realms"
      - name: theme-import
        image: docker.io/tractusx/portal-iam:v3.0.0
        imagePullPolicy: IfNotPresent
        command:
          - sh
        args:
          - -c
          - |
            echo "Copying themes-catenax-shared..."
            cp -R /import/themes/catenax-shared/* /themes-catenax-shared
            echo "Copying themes-catenax-shared-portal..."
            cp -R /import/themes/catenax-shared-portal/* /themes-catenax-shared-portal
        volumeMounts:
        - name: themes-catenax-shared
          mountPath: "/themes-catenax-shared"
        - name: themes-catenax-shared-portal
          mountPath: "/themes-catenax-shared-portal"
      # uncomment the following line for tls
      # - name: init-certs
      #   image: docker.io/bitnami/keycloak:23.0.7-debian-12-r1
      #   imagePullPolicy: IfNotPresent
      #   command: ["/bin/bash"]
      #   args:
      #     - -ec
      #     - |-
      #       keytool -import -file "/certs/tls.crt" \
      #               -keystore "/opt/bitnami/keycloak/certs/keycloak.truststore.jks" \
      #               -storepass "${KEYCLOAK_SPI_TRUSTSTORE_PASSWORD}" \
      #               -noprompt
      #   env:
      #     - name: KEYCLOAK_SPI_TRUSTSTORE_PASSWORD
      #       value: "changeit"
      #   volumeMounts:
      #     - name: certificates
      #       mountPath: /certs
      #     - name: shared-certs
      #       mountPath: "/opt/bitnami/keycloak/certs"
    extraEnvVars:
      - name: KEYCLOAK_EXTRA_ARGS
        value: "-Dkeycloak.migration.action=import -Dkeycloak.migration.provider=dir -Dkeycloak.migration.dir=/realms -Dkeycloak.migration.strategy=IGNORE_EXISTING"
      # uncomment the following line for tls
      # - name: KEYCLOAK_SPI_TRUSTSTORE_FILE
      #   value: "/opt/bitnami/keycloak/certs/keycloak.truststore.jks"
      # - name: KEYCLOAK_SPI_TRUSTSTORE_PASSWORD
      #   value: "changeit"
    extraVolumes:
      - name: realms
        emptyDir: {}
      - name: themes-catenax-shared
        emptyDir: {}
      - name: themes-catenax-shared-portal
        emptyDir: {}
      # uncomment the following line for tls
      # - name: certificates
      #   secret:
      #     secretName: root-secret
      #     defaultMode: 420
      # - name: shared-certs
      #   emptyDir: {}
    extraVolumeMounts:
      - name: realms
        mountPath: "/realms"
      - name: themes-catenax-shared
        mountPath: "/opt/bitnami/keycloak/themes/catenax-shared"
      - name: themes-catenax-shared-portal
        mountPath: "/opt/bitnami/keycloak/themes/catenax-shared-portal"
      # uncomment the following line for tls
      # - name: certificates
      #   mountPath: /certs
      # - name: shared-certs
      #   mountPath: "/opt/bitnami/keycloak/certs"
    ingress:
      enabled: true
      ingressClassName: "nginx"
      hostname: "sharedidp.tx.test"
      annotations:
        # uncomment the following line for tls
        # cert-manager.io/cluster-issuer: "my-ca-issuer"
        nginx.ingress.kubernetes.io/cors-allow-credentials: "true"
        nginx.ingress.kubernetes.io/cors-allow-methods: "PUT, GET, POST, OPTIONS"
        nginx.ingress.kubernetes.io/cors-allow-origin: "http://sharedidp.tx.test"
        nginx.ingress.kubernetes.io/enable-cors: "true"
        nginx.ingress.kubernetes.io/proxy-buffer-size: "128k"
        nginx.ingress.kubernetes.io/proxy-buffering: "on"
        nginx.ingress.kubernetes.io/proxy-buffers-number: "20"
        nginx.ingress.kubernetes.io/use-regex: "true"
      tls: false
  secrets:
    postgresql:
      auth:
        existingSecret:
          postgrespassword: "dbpasswordsharedidp"
          password: "dbpasswordsharedidp"
          replicationPassword: "dbpasswordsharedidp"
    auth:
      existingSecret:
        # -- Password for the admin username 'admin'. Secret-key 'admin-password'.
        adminpassword: "adminconsolepwsharedidp"

bpndiscovery:
  enabled: false
  enablePostgres: true
  bpndiscovery:
    host: semantics.tx.test
    ingress:
      enabled: true
      tls: false
      urlPrefix: "/bpndiscovery"
      className: "nginx"
      annotations:
        cert-manager.io/cluster-issuer: "my-ca-issuer"
        nginx.ingress.kubernetes.io/rewrite-target: "/$2"
        nginx.ingress.kubernetes.io/use-regex: "true"
        nginx.ingress.kubernetes.io/enable-cors: "true"
        nginx.ingress.kubernetes.io/cors-allow-credentials: "true"
        nginx.ingress.kubernetes.io/x-forwarded-prefix: "/bpndiscovery"
    authentication: true
    idp:
      issuerUri: "http://centralidp.tx.test/auth/realms/CX-Central"
      publicClientId: "Cl22-CX-BPND"
    bpndiscoverEndpoint:
      allowedTypes: oen,wmi,passtype,manufacturerPartId
      description: Service to discover BPN for different kind of type numbers
      endpointAddress: /bpndiscovery
      documentation: /bpndiscovery/swagger-ui/index.html
      timeToLive: "31536000"
    livenessProbe:
      initialDelaySeconds: 200
    readinessProbe:
      initialDelaySeconds: 200
  postgresql:
    nameOverride: "bpndiscovery-postgresql"
    primary:
      persistence:
        enabled: false
        size: 8Gi
    auth:
      password: "dbpasswordbpndiscovery"
      postgresPassword: "dbpasswordbpndiscovery"

discoveryfinder:
  enabled: false
  enablePostgres: true
  discoveryfinder:
    authentication: true
    livenessProbe:
      initialDelaySeconds: 200
    readinessProbe:
      initialDelaySeconds: 200
    host: semantics.tx.test
    properties:
      discoveryfinder:
        initialEndpoints:
          - type: bpn
            endpointAddress: http://portal-backend.tx.test/api/administration/Connectors/discovery
            description: Service to discover connector endpoints based on bpns
            documentation: http://portal-backend.tx.test/api/administration/swagger/index.html
    idp:
      issuerUri: "http://centralidp.tx.test/auth/realms/CX-Central"
      publicClientId: "Cl21-CX-DF"
    dataSource:
      url: "jdbc:postgresql://{{ .Release.Name }}-discoveryfinder-postgresql:5432/discoveryfinder"
    # -- docs: http://semantics.tx.test/discoveryfinder/swagger-ui/index.html
    ingress:
      enabled: true
      tls: false
      urlPrefix: "/discoveryfinder"
      className: "nginx"
      annotations:
        cert-manager.io/cluster-issuer: "my-ca-issuer"
        nginx.ingress.kubernetes.io/rewrite-target: "/$2"
        nginx.ingress.kubernetes.io/use-regex: "true"
        nginx.ingress.kubernetes.io/enable-cors: "true"
        nginx.ingress.kubernetes.io/cors-allow-credentials: "true"
        nginx.ingress.kubernetes.io/x-forwarded-prefix: "/discoveryfinder"
  postgresql:
    nameOverride: "discoveryfinder-postgresql"
    primary:
      persistence:
        enabled: false
        size: 8Gi
    auth:
      password: "dbpassworddiscoveryfinder"
      postgresPassword: "dbpassworddiscoveryfinder"

selfdescription:
  enabled: false
  sdfactory:
    secret:
      # -- JWK Set URI
      jwkSetUri: "http://centralidp.tx.test/auth/realms/CX-Central/protocol/openid-connect/certs"
      # -- Custodian wallet client id
      clientId: "sa-cl5-custodian-1"
      # -- Custodian wallet client secret
      clientSecret: "6pnnap7byS1TImL9Uj7g2psud9Fdq4tJ"
      # -- Keycloak URL
      authServerUrl: "http://centralidp.tx.test/auth"
      # -- Keycloak Realm detail
      realm: "CX-Central"
      # -- Keycloak Resource detail
      resource: "Cl5-CX-Custodian"
      # -- Details for Custodian wallet URI
      custodianWalletUri: ""
      # -- Details for Clearing House URI
      clearingHouseUri: ""
      # -- Details for Clearing House URL
      clearingHouseServerUrl: ""
      # -- Details for Clearing House Realm
      clearingHouseRealm: ""
      # -- Details for Clearing House Client ID
      clearingHouseClientId: ""
      # -- Details for Clearing House Client Secret
      clearingHouseClientSecret: ""
  ingress:
    enabled: true
    hosts:
      - host: "sdfactory.tx.test"
        paths:
          - path: "/"
            pathType: "Prefix"
    # uncomment the following lines for tls
    # tls:
    # - tlsName: sdfactory.tx.test-tls
    #   hosts:
    #     - sdfactory.tx.test.net
    className: "nginx"
    # annotations:
    #   # uncomment the following line for tls
    #   cert-manager.io/cluster-issuer: "my-ca-issuer"

iatpmock:
  enabled: false
  nameOverride: mock-util-service
  fullnameOverride: mock-util-service
  # -- see README ## Precondition for IATP Mock
  image:
    # override with locally built image if needed, default "tractusx/iatp-mock"
    repository: ""
    # override tag if needed, default "testing"
    tag: ""
  ingress:
    enabled: true
    hosts:
      - host: iatpmock.tx.test
        paths:
          - path: /
            pathType: ImplementationSpecific

ssi-credential-issuer:
  enabled: false
  portalBackendAddress: "http://portal-backend.tx.test"
  walletAddress: "http://iatpmock.tx.test"
  walletTokenAddress: "https://iatpmock-token-address.tx.test/oauth/token"
  issuer:
    swaggerEnabled: true
    logging:
      businessLogic: "Debug"
      default: "Debug"
    portal:
      # -- Provide portal client-id from CX IAM centralidp.
      # You must specify the technical user with the required roles for the interaction with the portal
      clientId: "sa-cl24-01"
      # -- Client-secret for portal client-id. Secret-key 'portal-client-secret'.
      clientSecret: "VRHQM2NOA4176Vrscxey1DdO4P7ikUQc"
    credential:
      issuerDid: "did:web:managed-identity-wallets.tx.test:BPNL00000003CRHK"
      issuerBpn: "BPNL00000003CRHK"
      # statusListUrl: "https://example.org/statuslist"
      encryptionConfigIndex: 0
      encryptionConfigs:
        index0:
          # EncryptionKey for wallet. Secret-key 'credential-encryption-key0'. Expected format is 256 bit (64 digits) hex.
          encryptionKey: "deb8261ec7b89c344f1c5ef5a11606e305f14e0d231b1357d90ad0180c5081d3"
  processesworker:
    portal:
      # -- Provide portal client-id from CX IAM centralidp.
      # You must specify the technical user with the required roles for the interaction with the portal
      clientId: "sa-cl24-01"
      # -- Client-secret for portal client-id. Secret-key 'portal-client-secret'.
      clientSecret: "VRHQM2NOA4176Vrscxey1DdO4P7ikUQc"
    logging:
      default: "Debug"
    processIdentity:
      identityId: ac1cf001-7fbc-1f2f-817f-bce058020006
    wallet:
      # -- Provide wallet client-id from CX IAM centralidp.
      # You must specify the technical user with the required roles for the interaction with the managed-identity-wallet
      clientId: "wallet-client-id"
      # -- Client-secret for wallet client-id. Secret-key 'wallet-client-secret'.
      clientSecret: ""
      encryptionConfigIndex: 0
      encryptionConfigs:
        index0:
          # EncryptionKey for wallet. Secret-key 'process-wallet-encryption-key0'. Expected format is 256 bit (64 digits) hex.
          encryptionKey: "deb8261ec7b89c344f1c5ef5a11606e305f14e0d231b1357d90ad0180c5081d3"
  issuermigrations:
    logging:
      default: "Debug"
  credentialExpiry:
    logging:
      default: "Debug"
  postgresql:
    enabled: true
    architecture: standalone
    primary:
      persistence:
        enabled: false
    auth:
      # -- Password for the root username 'postgres'. Secret-key 'postgres-password'.
      postgrespassword: "rootissuerpassword"
      # -- Password for the non-root username 'issuer'. Secret-key 'password'.
      password: "issuerpassword"

  centralidp:
    # -- Provide centralidp base address (CX IAM), without trailing '/auth'.
    address: "http://centralidp.tx.test"
    jwtBearerOptions:
      requireHttpsMetadata: "false"
  ingress:
    enabled: true
    className: "nginx"
    annotations:
      nginx.ingress.kubernetes.io/use-regex: "true"
      nginx.ingress.kubernetes.io/enable-cors: "true"
      nginx.ingress.kubernetes.io/proxy-body-size: "8m"
      nginx.ingress.kubernetes.io/cors-allow-origin: "http://*.tx.test"
    # -- Ingress TLS configuration
    tls: []
      # - secretName: ""
      #   hosts:
      #     - ""
    hosts:
      - host: "ssi-credential-issuer.tx.test"
        paths:
          - path: "/"
            pathType: "Prefix"
            backend:
              port: 8080

# Set up services for a business partner pool, golden record process
# and a gate with which the Portal and the users can share business partner data
bpdm:
  enabled: false
  postgres:
    # We use the default name for BPDM postgres
    fullnameOverride:
    nameOverride: bpdm-postgres
    auth:
      # BPDM can't handle random initial passwords at the moment
      # so need to set a fixed one here and use it in the app configs later
      password: &bpdmPostgresPassword "dbpasswordbpdm"
      postgresPassword: *bpdmPostgresPassword
    architecture: standalone
    primary:
      persistence:
        enabled: false
  keycloak:
    # We use Central-IDP as authentication server
    enabled: false
  # Set up a Gate that acts as the Portal's Gate
  bpdm-gate:
    postgres:
      # App uses BPDM postgres default name to find connection to the Postgres
      fullnameOverride:
      nameOverride: bpdm-postgres
    ingress:
      enabled: true
      annotations:
        nginx.ingress.kubernetes.io/rewrite-target: "/$2"
        nginx.ingress.kubernetes.io/use-regex: "true"
        nginx.ingress.kubernetes.io/x-forwarded-prefix: "/gate"
      # The Portal expects its Gate on that specific url path so we provide it here through ingress
      hosts:
        - host: "business-partners.tx.test"
          paths:
            - path: "/gate(/|$)(.*)"
              pathType: "ImplementationSpecific"
    applicationConfig:
      server:
        # App should take the x-forward-header-prefix into account for Swagger-UI and redirects to work correctly
        forward-headers-strategy: "FRAMEWORK"
      bpdm:
        bpn:
          # This Gate has no owner restriction as other companies can write into the Gate under their own tenant
          owner-bpn-l:
        tasks:
          creation:
            fromSharingMember:
              # Portal needs to set uploaded business partner data as ready to be shared by itself (disables setting it automatically as ready)
              starts-as-ready: false
        security:
          # App's API is authenticated over Central-IDP
          auth-server-url: "http://centralidp.tx.test/auth"
          realm: "CX-Central"
          # Is Central-IDPs name for the Gate client
          # The Gate will use that name to check for existing client permissions here
          client-id: "Cl16-CX-BPDMGate"
        # The Gate needs to connect to the Pool and Orchestrator to realize the Golden Record Process
        # Setup client connection for both here (where to connect and the authentication)
        # By default the Gate assumes that the authentication server of the Pool and Orchestrator are the same as its own
        # We will reuse the general BPDM admin technical user to establish connection between the services
        client:
          pool:
            registration:
              client-id: *bpdmAdminClientId
          orchestrator:
            registration:
              client-id: *bpdmAdminClientId
    applicationSecrets:
      spring:
        datasource:
          # Set the password of the postgres BPDM user here (Currently, BPDM can't deal with random initial passwords)
          password: *bpdmPostgresPassword
      bpdm:
        client:
          orchestrator:
            registration:
              client-secret: *bpdmAdminClientSecret
          pool:
            registration:
              client-secret: *bpdmAdminClientSecret

  # Configures the central business partner Pool
  bpdm-pool:
    postgres:
      # App uses BPDM postgres default name to find connection to the Postgres
      fullnameOverride:
      nameOverride: bpdm-postgres
    ingress:
      enabled: true
      annotations:
        nginx.ingress.kubernetes.io/rewrite-target: "/$2"
        nginx.ingress.kubernetes.io/use-regex: "true"
        nginx.ingress.kubernetes.io/x-forwarded-prefix: "/pool"
      hosts:
        - host: "business-partners.tx.test"
          paths:
            - path: "/pool(/|$)(.*)"
              pathType: "ImplementationSpecific"
    applicationConfig:
      server:
        # App should take the x-forward-header-prefix into account for Swagger-UI and redirects to work correctly
        forward-headers-strategy: "FRAMEWORK"
      bpdm:
        security:
          # App's API is authenticated over Central-IDP
          auth-server-url: "http://centralidp.tx.test/auth"
          realm: "CX-Central"
          # Is Central-IDPs name for the Pool client
          # The Pool will use that name to check for existing client permissions here
          client-id: "Cl7-CX-BPDM"
        # The Pool needs to connect to the Orchestrator to realize the Golden Record Process
        # Setup client connection (where to connect and the authentication)
        # By default the Pool assumes that the authentication server of the Orchestrator matches that one of the Pool
        # We will reuse the general BPDM admin technical user to establish connection between the services
        client:
          orchestrator:
            registration:
              client-id: *bpdmAdminClientId
    applicationSecrets:
      bpdm:
        client:
          orchestrator:
            registration:
              client-secret: *bpdmAdminClientSecret
      spring:
        datasource:
          # Set the password of the postgres BPDM user here (Currently, BPDM can't deal with random initial passwords)
          password: *bpdmPostgresPassword

  # Configures the central service for orchestrating the Golden Record Process
  bpdm-orchestrator:
    ingress:
      enabled: true
      annotations:
        nginx.ingress.kubernetes.io/rewrite-target: "/$2"
        nginx.ingress.kubernetes.io/use-regex: "true"
        nginx.ingress.kubernetes.io/x-forwarded-prefix: "/orchestrator"
      hosts:
        - host: "business-partners.tx.test"
          paths:
            - path: "/orchestrator(/|$)(.*)"
              pathType: "ImplementationSpecific"
    applicationConfig:
      server:
        # App should take the x-forward-header-prefix into account for Swagger-UI and redirects to work correctly
        forward-headers-strategy: "FRAMEWORK"
      bpdm:
        security:
          auth-server-url: "http://centralidp.tx.test/auth"
          realm: "CX-Central"
          # The Central-IDP does not yet have dedicated Orchestrator permissions
          # Therefore, we just reuse the permissions from the Pool for now
          # Basically it is saying: If you would be able to write into the Pool directly,
          # you are also able to create golden record tasks which eventually will write data into the Pool
          # (We are stricter with the permissions now than we will have to be when using dedicated permissions)
          client-id: "Cl7-CX-BPDM"
          permissions:
            createTask: "write_partner"
            readTask: "write_partner"
            reservation:
              clean: "write_partner"
              cleanAndSync: "write_partner"
              poolSync: "write_partner"
            result:
              clean: "write_partner"
              cleanAndSync: "write_partner"
              poolSync: "write_partner"

  # This installs a dummy cleaning service which performs rudimentary cleaning operations in order to realize the golden record process
  bpdm-cleaning-service-dummy:
    applicationConfig:
      bpdm:
        # The cleaning dummy needs to connect to the Orchestrator to realize the Golden Record Process
        # Setup client connection (where to connect and the authentication)
        # We reuse the general BPDM admin technical user to establish connection between the services
        client:
          orchestrator:
            provider:
              issuer-uri: "http://centralidp.tx.test/auth/realms/CX-Central"
            registration:
              client-id: *bpdmAdminClientId
    applicationSecrets:
      bpdm:
        client:
          orchestrator:
            registration:
              client-secret: *bpdmAdminClientSecret

dataconsumerOne:
  enabled: false
  seedTestdata: false
  nameOverride: dataconsumer-1
  secrets:
    edc-miw-keycloak-secret: UbfW4CR1xH4OskkovqJ2JzcwnQIrG7oj
  tractusx-connector:
    nameOverride: dataconsumer-1-edc
    participant:
      id: BPNL00000003AZQP
    iatp:
      id: did:web:mock-util-service:BPNL00000003AZQP
      trustedIssuers:
        - did:web:mock-util-service:trusted-issuer
      sts:
        dim:
          url: http://mock-util-service/sts
        oauth:
          token_url: http://centralidp.tx.test/auth/realms/CX-Central/protocol/openid-connect/token
          client:
            id: satest01
            secret_alias: edc-miw-keycloak-secret
    controlplane:
      env:
        TX_IAM_IATP_CREDENTIALSERVICE_URL: http://mock-util-service
        EDC_IAM_DID_WEB_USE_HTTPS: false
      bdrs:
        server:
          url: http://bdrs-server.tx.test/api/directory
      endpoints:
        management:
          authKey: TEST1
      ingresses:
        - enabled: true
          hostname: "dataconsumer-1-controlplane.tx.test"
          endpoints:
            - default
            - protocol
            - management
          className: "nginx"
          tls:
            enabled: false
    dataplane:
      env:
        TX_IAM_IATP_CREDENTIALSERVICE_URL: http://mock-util-service
        EDC_IAM_DID_WEB_USE_HTTPS: false
      ingresses:
        - enabled: true
          hostname: "dataconsumer-1-dataplane.tx.test"
          endpoints:
            - default
            - public
          className: "nginx"
          tls:
            enabled: false
      token:
        signer:
          privatekey_alias: tokenSignerPrivateKey
        verifier:
          publickey_alias: tokenSignerPublicKey
    postgresql:
      nameOverride: dataconsumer-1-db
      jdbcUrl: "jdbc:postgresql://{{ .Release.Name }}-dataconsumer-1-db:5432/edc"
      auth:
        password: "dbpassworddataconsumerone"
        postgresPassword: "dbpassworddataconsumerone"
    vault:
      hashicorp:
        url: http://edc-dataconsumer-1-vault:8200
      secretNames:
        transferProxyTokenSignerPrivateKey: tokenSignerPrivateKey
        transferProxyTokenSignerPublicKey: tokenSignerPublicKey
        transferProxyTokenEncryptionAesKey: tokenEncryptionAesKey

  vault:
    nameOverride: edc-dataconsumer-1-vault
    fullnameOverride: edc-dataconsumer-1-vault
    enabled: true
    server:
      postStart: []

  digital-twin-registry:
    enabled: false

  simple-data-backend:
    enabled: false

tx-data-provider:
  enabled: false
  seedTestdata: true
  backendUrl: http://{{ .Release.Name }}-dataprovider-submodelserver:8080
  registryUrl: http://{{ .Release.Name }}-dataprovider-dtr:8080/api/v3
  controlplanePublicUrl: http://{{ .Release.Name }}-dataprovider-edc-controlplane:8084
  controlplaneManagementUrl: http://{{ .Release.Name }}-dataprovider-edc-controlplane:8081
  dataplaneUrl: http://{{ .Release.Name }}-dataprovider-edc-dataplane:8081
  nameOverride: dataprovider
  secrets:
    edc-miw-keycloak-secret: pyFUZP2L9UCSVJUScHcN3ZEgy2PGyEpg
  tractusx-connector:
    nameOverride: dataprovider-edc
    participant:
      id: BPNL00000003AYRE
    iatp:
      id: did:web:mock-util-service:BPNL00000003AYRE
      trustedIssuers:
        - did:web:mock-util-service:trusted-issuer
      sts:
        dim:
          url: http://mock-util-service/sts
        oauth:
          token_url: http://centralidp.tx.test/auth/realms/CX-Central/protocol/openid-connect/token
          client:
            id: satest02
            secret_alias: edc-miw-keycloak-secret
    controlplane:
      env:
        TX_IAM_IATP_CREDENTIALSERVICE_URL: http://mock-util-service
        EDC_IAM_DID_WEB_USE_HTTPS: false
      bdrs:
        server:
          url: http://bdrs-server.tx.test/api/directory
      endpoints:
        management:
          authKey: TEST2
      ingresses:
        - enabled: true
          hostname: "dataprovider-controlplane.tx.test"
          endpoints:
            - default
            - protocol
            - management
          className: "nginx"
          tls:
            enabled: false
    dataplane:
      env:
        TX_IAM_IATP_CREDENTIALSERVICE_URL: http://mock-util-service
        EDC_IAM_DID_WEB_USE_HTTPS: false
      ingresses:
        - enabled: true
          hostname: "dataprovider-dataplane.tx.test"
          endpoints:
            - default
            - public
          className: "nginx"
          tls:
            enabled: false
      token:
        signer:
          privatekey_alias: tokenSignerPrivateKey
        verifier:
          publickey_alias: tokenSignerPublicKey
    postgresql:
      nameOverride: dataprovider-db
      jdbcUrl: "jdbc:postgresql://{{ .Release.Name }}-dataprovider-db:5432/edc"
      auth:
        password: "dbpasswordtxdataprovider"
        postgresPassword: "dbpasswordtxdataprovider"
    vault:
      hashicorp:
        url: http://edc-dataprovider-vault:8200
      secretNames:
        transferProxyTokenSignerPrivateKey: tokenSignerPrivateKey
        transferProxyTokenSignerPublicKey: tokenSignerPublicKey
        transferProxyTokenEncryptionAesKey: tokenEncryptionAesKey

  vault:
    nameOverride: edc-dataprovider-vault
    fullnameOverride: edc-dataprovider-vault
    enabled: true
    server:
      postStart: []

  digital-twin-registry:
    nameOverride: dataprovider-dtr
    postgresql:
      nameOverride: dataprovider-dtr-db
      auth:
        password: "dbpassworddtrdataprovider"
        existingSecret: dataprovider-secret-dtr-postgres-init
    registry:
      host: dataprovider-dtr.test

  simple-data-backend:
    nameOverride: dataprovider-submodelserver
    ingress:
      enabled: false

semantic-hub:
  enabled: false
  enableKeycloak: false
  keycloak:
    postgresql:
      architecture: standalone
      primary:
        persistence:
          enabled: false
  hub:
    authentication: false
    livenessProbe:
      initialDelaySeconds: 200
    readinessProbe:
      initialDelaySeconds: 200
    host: semantics.tx.test
    ingress:
      enabled: true
      tls: false
      urlPrefix: "/hub"
      className: "nginx"
      annotations:
        cert-manager.io/cluster-issuer: "my-ca-issuer"
        nginx.ingress.kubernetes.io/rewrite-target: "/$2"
        nginx.ingress.kubernetes.io/use-regex: "true"
        nginx.ingress.kubernetes.io/enable-cors: "true"
        nginx.ingress.kubernetes.io/cors-allow-credentials: "true"
        nginx.ingress.kubernetes.io/x-forwarded-prefix: "/hub"
  graphdb:
    enabled: true
    image: jena-fuseki-docker:4.7.0
    imagePullPolicy: Never
    storageClassName: ""
    storageSize: 8Gi

dataconsumerTwo:
  enabled: false
  seedTestdata: false
  nameOverride: dataconsumer-2
  secrets:
    edc-miw-keycloak-secret: tPwy4exxH1sXBRQouobSA2nNVaaPuwCs
  tractusx-connector:
    nameOverride: dataconsumer-2-edc
    participant:
      id: BPNL00000003AVTH
    iatp:
      id: did:web:mock-util-service:BPNL00000003AVTH
      trustedIssuers:
        - did:web:mock-util-service:trusted-issuer
      sts:
        dim:
          url: http://mock-util-service/sts
        oauth:
          token_url: http://centralidp.tx.test/auth/realms/CX-Central/protocol/openid-connect/token
          client:
            id: satest03
            secret_alias: edc-miw-keycloak-secret
    controlplane:
      env:
        TX_IAM_IATP_CREDENTIALSERVICE_URL: http://mock-util-service
        EDC_IAM_DID_WEB_USE_HTTPS: false
      bdrs:
        server:
          url: http://bdrs-server.tx.test/api/directory
      endpoints:
        management:
          authKey: TEST3
      ingresses:
        - enabled: true
          hostname: "dataconsumer-2-controlplane.tx.test"
          endpoints:
            - default
            - protocol
            - management
          className: "nginx"
          tls:
            enabled: false
    dataplane:
      env:
        TX_IAM_IATP_CREDENTIALSERVICE_URL: http://mock-util-service
        EDC_IAM_DID_WEB_USE_HTTPS: false
      ingresses:
        - enabled: true
          hostname: "dataconsumer-2-dataplane.tx.test"
          endpoints:
            - default
            - public
          className: "nginx"
          tls:
            enabled: false
      token:
        signer:
          privatekey_alias: tokenSignerPrivateKey
        verifier:
          publickey_alias: tokenSignerPublicKey
    postgresql:
      nameOverride: dataconsumer-2-db
      jdbcUrl: "jdbc:postgresql://{{ .Release.Name }}-dataconsumer-2-db:5432/edc"
      auth:
        password: "dbpassworddataconsumertwo"
        postgresPassword: "dbpassworddataconsumertwo"
    vault:
      hashicorp:
        url: http://edc-dataconsumer-2-vault:8200
      secretNames:
        transferProxyTokenSignerPrivateKey: tokenSignerPrivateKey
        transferProxyTokenSignerPublicKey: tokenSignerPublicKey
        transferProxyTokenEncryptionAesKey: tokenEncryptionAesKey

  vault:
    nameOverride: edc-dataconsumer-2-vault
    fullnameOverride: edc-dataconsumer-2-vault
    enabled: true
    server:
      postStart: []

  digital-twin-registry:
    enabled: false

  simple-data-backend:
    enabled: false

pgadmin4:
  enabled: false
  env:
    email: pgadmin4@txtest.org
    password: tractusxpgdamin4
  persistentVolume:
    enabled: false
  ingress:
    enabled: true
    ingressClassName: "nginx"
    hosts:
      - host: pgadmin4.tx.test
        paths:
        - path: /
          pathType: Prefix

bdrs-server-memory:
  nameOverride: bdrs-server
  fullnameOverride: bdrs-server
  enabled: false
  seeding:
    url: "http://bdrs-server:8081"
    enabled: true
    bpnList:
      - bpn: "BPNL00000003B3NX"
        did: "did:web:mock-util-service:BPNL00000003B3NX"
      - bpn: "BPNL00000003CSGV"
        did: "did:web:mock-util-service:BPNL00000003CSGV"
      - bpn: "BPNL00000003B6LU"
        did: "did:web:mock-util-service:BPNL00000003B6LU"
      - bpn: "BPNL00000003AXS3"
        did: "did:web:mock-util-service:BPNL00000003AXS3"
      - bpn: "BPNL00000003AZQP"
        did: "did:web:mock-util-service:BPNL00000003AZQP"
      - bpn: "BPNL00000003AWSS"
        did: "did:web:mock-util-service:BPNL00000003AWSS"
      - bpn: "BPNL00000003AYRE"
        did: "did:web:mock-util-service:BPNL00000003AYRE"
      - bpn: "BPNL00000003AVTH"
        did: "did:web:mock-util-service:BPNL00000003AVTH"
      - bpn: "BPNL00000000BJTL"
        did: "did:web:mock-util-service:BPNL00000000BJTL"
      - bpn: "BPNL00000003CML1"
        did: "did:web:mock-util-service:BPNL00000003CML1"
      - bpn: "BPNL00000003B2OM"
        did: "did:web:mock-util-service:BPNL00000003B2OM"
      - bpn: "BPNL00000003B0Q0"
        did: "did:web:mock-util-service:BPNL00000003B0Q0"
      - bpn: "BPNL00000003B5MJ"
        did: "did:web:mock-util-service:BPNL00000003B5MJ"
      - bpn: "BPNS0000000008ZZ"
        did: "did:web:mock-util-service:BPNS0000000008ZZ"
      - bpn: "BPNL00000003CNKC"
        did: "did:web:mock-util-service:BPNL00000003CNKC"
      - bpn: "BPNS00000008BDFH"
        did: "did:web:mock-util-service:BPNS00000008BDFH"

  server:
    trustedIssuers:
      - did:web:mock-util-service:trusted-issuer
    env:
      EDC_IAM_DID_WEB_USE_HTTPS: false

    endpoints:
      management:
        authKey: TEST
    ingresses:
      - enabled: true
        hostname: bdrs-server.tx.test
        endpoints:
          - directory
          - management
        className: "nginx"
        tls:
          enabled: false

ssi-dim-wallet-stub:
  enabled: false
  wallet:
    replicaCount: 1
    host: ssi-dim-wallet-stub.tx.test
    nameSpace: "umbrella"
    appName: "ssi-dim-wallet-stub"
    configName: "ssi-dim-wallet-config"
    serviceName: "ssi-dim-wallet-service"
    secretName: "ssi-dim-wallet-secret"
    ingressName: "ssi-dim-wallet-ingress"
    image:
      repository: tractusx/ssi-dim-wallet-stub
      pullPolicy: IfNotPresent
      tag: "0.0.2"
    ingress:
      enabled: true
      tls: false
      urlPrefix: /
      className: nginx
      annotations: {}
    swagger:
      ui:
        status: true
      apiDoc:
        status: true
    logLevel: "debug"
    environment: "default"
    baseWalletBpn: "BPNL00000003CRHK"
    didHost: "ssi-dim-wallet-stub.tx.test"
    stubUrl: "http://ssi-dim-wallet-stub.tx.test"
    statusListVcId: "8a6c7486-1e1f-4555-bdd2-1a178182651e"
    tokenExpiryTime: "5"
    portal:
      waitTime: "60"
      host: "http://portal-backend.tx.test"
      clientId: "sa-cl2-05"
      clientSecret: "changeme"
    keycloak:
      realm: "CX-Central"
      authServerUrl: "http://centralidp.tx.test/auth"
    service:
      type: ClusterIP
      port: 8080
  keycloak:
    enabled: false
